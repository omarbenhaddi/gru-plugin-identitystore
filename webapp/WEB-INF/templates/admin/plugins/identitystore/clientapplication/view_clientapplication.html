<#include "../adminidentities_tabs.html" />
<@tabs tab="clientapplication" />

<@rowBox>
    <@boxHeader i18nTitleKey="identitystore.view_clientapplication.pageTitle">
	<@headerButtons>
    <a href="jsp/admin/plugins/identitystore/ManageClientApplications.jsp?view=manage_clientapplications"
       class="btn btn-secondary btn-sm" >
        #i18n{portal.util.labelBack}
    </a>
	</@headerButtons>
    </@boxHeader>
    <@boxBody>    
    <@messages infos=infos />
    <div class="clearfix"></div>
    
    <@table>
        <thead>
            <input type="hidden" id="id" name="id"/>
            <th>#i18n{identitystore.modify_clientapplication.labelName}</th>
            <th>#i18n{identitystore.modify_clientapplication.labelCode}</th>
        </thead>
		<tbody>
        <tr>
            <input type="hidden" id="id" name="id"/>
            <td>
                ${clientapplication.name}
            </td>
            <td>
                ${clientapplication.code}
            </td>
        </tr>
		</tbody>
    </@table>

  </@boxBody>
</@rowBox>

<@rowBox>
<@boxHeader i18nTitleKey="identitystore.manage_servicecontracts.pageTitle">
</@boxHeader>
<@boxBody>
<@messages infos=infos />

<div class="clearfix"></div>
<@table>
<tr>
    <th>Actif</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnName}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnApplicationCode}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnOrganizationalEntity}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnResponsibleName}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnContactName}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnServiceType}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnAuthorizedMerge}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnAuthorizedAccountUpdate}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnAuthorizedDeletion}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnAuthorizedImport}</th>
    <th>#i18n{identitystore.manage_servicecontracts.columnAuthorizedExport}</th>
    <th>#i18n{portal.util.labelActions}</th>
</tr>
<@tableHeadBodySeparator />
<#list clientapplication.serviceContracts as servicecontract >
<tr>
    <td>
        <#if servicecontract.active>
        <i class="fas fa-check" aria-hidden="true"></i>
        <#else>
        <i class="fas fa-times" aria-hidden="true"></i>
        </#if>
    </td>
    <td>
        ${servicecontract.name}
    </td>
    <td>
        ${clientapplication.code}
    </td>
    <td>
        ${servicecontract.organizationalEntity}
    </td>
    <td>
        ${servicecontract.responsibleName}
    </td>
    <td>
        ${servicecontract.contactName}
    </td>
    <td>
        ${servicecontract.serviceType}
    </td>
    <td>
        <#if servicecontract.authorizedMerge = true>
            <i class="fas fa-check" aria-hidden="true"></i>
        <#else>
            <i class="fas fa-times" aria-hidden="true"></i>
        </#if>
    </td>
    <td>
        <#if servicecontract.authorizedAccountUpdate = true>
            <i class="fas fa-check" aria-hidden="true"></i>
        <#else>
            <i class="fas fa-times" aria-hidden="true"></i>
        </#if>
    </td>
    <td>
        <#if servicecontract.authorizedDeletion = true>
        <i class="fas fa-check" aria-hidden="true"></i>
        <#else>
        <i class="fas fa-times" aria-hidden="true"></i>
    </#if>
    </td>
    <td>
        <#if servicecontract.authorizedImport = true>
        <i class="fas fa-check" aria-hidden="true"></i>
        <#else>
        <i class="fas fa-times" aria-hidden="true"></i>
    </#if>
    </td>
    <td>
        <#if servicecontract.authorizedExport = true>
        <i class="fas fa-check" aria-hidden="true"></i>
        <#else>
        <i class="fas fa-times" aria-hidden="true"></i>
    </#if>
    </td>
    <td>
        <@aButton href='jsp/admin/plugins/identitystore/ManageServiceContracts.jsp?view=modifyServiceContract&id=${servicecontract.id}' title='#i18n{portal.util.labelModify}' hideTitle=['all'] buttonIcon='pencil' />

        <@aButton href='jsp/admin/plugins/identitystore/ManageServiceContracts.jsp?action=confirmRemoveServiceContract&id=${servicecontract.id}' title='#i18n{portal.util.labelDelete}' buttonIcon='trash' hideTitle=['all'] color='btn-danger'  />

        <a href="jsp/admin/plugins/identitystore/ManageServiceContracts.jsp?view=displayServiceContract&id=${servicecontract.id}"
           class="btn btn-primary btn-sm" title="#i18n{identitystore.manage_servicecontracts.buttonDisplay}" >
            <i class="fa fa-eye"></i>
        </a>
    </td>
</tr>
</#list>
</@table>

</@boxBody>
<div class="clearfix"></div>
<!--<form class="form-inline pull-right" method="post" name="manage_clientapplications" action="jsp/admin/plugins/identitystore/ManageClientApplications.jsp">-->
<!--    <button class="btn btn-secondary btn-flat" type="submit">-->
<!--        <i class="fa fa-close"></i>-->
<!--        #i18n{portal.util.labelBack}-->
<!--    </button>-->
<!--</form>-->
<div class="form-inline pull-right">
    <a href="jsp/admin/plugins/identitystore/ManageServiceContracts.jsp?view=createServiceContract&id_client_app=${clientapplication.id}"
       class="btn btn-primary btn-sm" >
        Ajouter un contrat de service
    </a>
    <a href="jsp/admin/plugins/identitystore/ManageClientApplications.jsp?view=manage_clientapplications"
       class="btn btn-secondary btn-sm" >
        #i18n{portal.util.labelBack}
    </a>
</div>
</@rowBox>

